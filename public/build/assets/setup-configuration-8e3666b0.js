import{F as y,n as h,a as g}from"./bootstrap-bf627498.js";import{_ as i}from"./currency-a200e3a3.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{ae as p,a6 as s,z as n,x as d,y as c,A as r,F as _,ac as v,c as x,ax as C,H as F}from"./npm~@vue~runtime-core_-ff0bdc0c.js";import{U as q}from"./npm~@vue~shared_-82b01912.js";import"./npm~lodash-f7a36ac5.js";import"./npm~@ckeditor~ckeditor5-build-classic_-a8abd726.js";import"./npm~laravel-echo-7ac8f47a.js";import"./npm~pusher-js-7b18aad5.js";import"./npm~axios-4a70c6fc.js";import"./npm~chart.js-3fed1729.js";import"./npm~rxjs-93a76eed.js";import"./npm~tslib-f3101d7c.js";import"./npm~moment-fbc5633a.js";import"./npm~vue-6a0d7c4c.js";import"./npm~@vue~runtime-dom_-a668b91e.js";import"./npm~@vue~reactivity_-481192b6.js";import"./npm~@vue~compiler-dom_-04241bb4.js";import"./npm~@vue~compiler-core_-2a2ce8c7.js";import"./npm~rx-1641e2f8.js";import"./npm~@wordpress~hooks_-18172e20.js";import"./npm~mathjs-1dff8408.js";import"./npm~@babel~runtime_-34ca84e8.js";import"./npm~decimal.js-d133ee8e.js";import"./npm~complex.js-15c479db.js";import"./npm~fraction.js-52b397f9.js";import"./npm~typed-function-e88d1f37.js";import"./npm~seedrandom-b246f2f9.js";import"./npm~javascript-natural-sort-11e7fc54.js";import"./npm~escape-latex-404addb9.js";import"./npm~numeral-faf61dd1.js";import"./npm~currency.js-57f74176.js";const B={data:()=>({form:new y,fields:[],processing:!1,steps:[],failure:0,maxFailure:2,__:i}),methods:{validate(){},verifyDBConnectivity(){},saveConfiguration(e){this.form.disableFields(this.fields);const t=this.form.getValue(this.fields);return t.language=ns.language,this.processing=!0,h.post("/api/setup/configuration",t).subscribe({next:o=>{document.location="/sign-in"},error:o=>{this.processing=!1,this.form.enableFields(this.fields),this.form.triggerFieldsErrors(this.fields,o.data),g.error(o.message,"OK").subscribe()}})},divide(e){var t=Math.floor(e.length/2),o=e.slice(0,t),u=e.slice(t);return[o,u]},checkDatabase(){h.get("/api/setup/database").subscribe({next:e=>{this.fields=this.form.createFields([{label:i("Application"),description:i("That is the application name."),name:"ns_store_name",validation:"required"},{label:i("Username"),description:i("Provide the administrator username."),name:"admin_username",validation:"required"},{label:i("Email"),description:i("Provide the administrator email."),name:"admin_email",validation:"required"},{label:i("Password"),type:"password",description:i("What should be the password required for authentication."),name:"password",validation:"required"},{label:i("Confirm Password"),type:"password",description:i("Should be the same as the password above."),name:"confirm_password",validation:"required"}])},error:e=>{nsRouter.push("/database"),g.error("You need to define database settings","OKAY",{duration:3e3}).subscribe()}})}},mounted(){this.checkDatabase()}},V={key:1,class:"bg-white rounded shadow my-2"},N={class:"welcome-box border-b border-gray-300 p-3 text-gray-700"},P=["innerHTML"],S={class:"flex -mx-2"},D={class:"px-2 w-full md:w-1/2"},H={class:"px-2 w-full md:w-1/2"},O={class:"bg-gray-200 p-3 flex justify-between items-center"};function T(e,t,o,u,z,l){const f=p("ns-spinner"),b=p("ns-field"),w=p("ns-button");return s(),n("div",null,[e.fields.length===0?(s(),d(f,{key:0,size:"12",border:"4",animation:"fast"})):c("",!0),e.fields.length>0?(s(),n("div",V,[r("div",N,[r("div",{class:"border-b pb-3 mb-3",innerHTML:e.__("<strong>NexoPOS</strong> is now able to connect to the database. Start by creating the administrator account and giving a name to your installation. Once installed, this page will no longer be accessible.")},null,8,P),r("div",S,[r("div",D,[(s(!0),n(_,null,v(l.divide(e.fields)[0],(a,m)=>(s(),d(b,{key:m,field:a},null,8,["field"]))),128))]),r("div",H,[(s(!0),n(_,null,v(l.divide(e.fields)[1],(a,m)=>(s(),d(b,{key:m,field:a},null,8,["field"]))),128))])])]),r("div",O,[r("div",null,[e.processing?(s(),d(f,{key:0,size:"8",border:"4"})):c("",!0)]),x(w,{disabled:e.processing,onClick:t[0]||(t[0]=a=>l.saveConfiguration()),type:"info"},{default:C(()=>[F(q(e.__("Install")),1)]),_:1},8,["disabled"])])])):c("",!0)])}const be=k(B,[["render",T]]);export{be as default};
